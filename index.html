<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âvaluation Agent d'Exploitation</title>
    <link rel="stylesheet" href="styles.css"> <!-- Liaison avec le CSS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIZaSyDnb3VYMiA-DLFu8YxFLXNKKQVPq9QbqAs",
            authDomain: "test-eval-37611.firebaseapp.com",
            projectId: "test-eval-37611",
            storageBucket: "test-eval-37611.appspot.com",
            messagingSenderId: "580263145057",
            appId: "1:580263145057:web:424e6ec5edfb6a68839c420"
        };

        // Initialisation Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        document.getElementById("evaluationForm").addEventListener("submit", async function(event) {
            event.preventDefault();
            
            let formData = new FormData(this);
            let evaluationData = {};
            formData.forEach((value, key) => {
                evaluationData[key] = value;
            });

            try {
                await addDoc(collection(db, "evaluations"), evaluationData);
                alert("Donn√©es envoy√©es avec succ√®s dans Firestore !");
                this.reset();
            } catch (error) {
                alert("Erreur lors de l'envoi des donn√©es : " + error.message);
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <h1>√âVALUATION AGENT D'EXPLOITATION</h1>
        <p>Veuillez remplir ce formulaire pour √©valuer l'agent.</p>
        <form id="evaluationForm">
            <div class="form-group">
                <label for="date">Date :</label>
                <input type="date" id="date" name="date" required>
            </div>
            <div class="form-group">
                <label for="nom_agent">Nom et pr√©nom de l'agent √©valu√© :</label>
                <input type="text" id="nom_agent" name="nom_agent" required>
            </div>
            <div class="form-group">
                <label for="matricule">Matricule :</label>
                <input type="text" id="matricule" name="matricule" required>
            </div>
            <div class="form-group">
                <label for="evaluateur">Nom de l'√©valuateur :</label>
                <input type="text" id="evaluateur" name="evaluateur" required>
            </div>
            <h2>√âvaluation des comp√©tences</h2>
            <div class="form-group">
                <label for="participation_mission">Participation √† la mission :</label>
                <input type="range" id="participation_mission" name="participation_mission" min="0" max="4" step="1" value="0" class="slider">
            </div>
            <div class="form-group">
                <label for="attentif_radio">Attentif √† la radio :</label>
                <input type="range" id="attentif_radio" name="attentif_radio" min="0" max="4" step="1" value="0" class="slider">
            </div>
            <div class="form-group">
                <label for="anticipation_directions">Anticipation des directions :</label>
                <input type="range" id="anticipation_directions" name="anticipation_directions" min="0" max="4" step="1" value="0" class="slider">
            </div>
            <div class="form-group">
                <label for="vigilance_environnement">Vigilance environnement :</label>
                <input type="range" id="vigilance_environnement" name="vigilance_environnement" min="0" max="4" step="1" value="0" class="slider">
            </div>
            <div class="form-group">
                <label for="placements_deplacements">Placements et d√©placements :</label>
                <input type="range" id="placements_deplacements" name="placements_deplacements" min="0" max="4" step="1" value="0" class="slider">
            </div>
            <div class="form-group">
                <label for="respect_consignes">Respect des consignes :</label>
                <input type="range" id="respect_consignes" name="respect_consignes" min="0" max="4" step="1" value="0" class="slider">
            </div>
            <div class="form-group">
                <label for="prise_contact">Prise de contact :</label>
                <input type="range" id="prise_contact" name="prise_contact" min="0" max="4" step="1" value="0" class="slider">
            </div>
            <div class="form-group">
                <label for="observation">Observation :</label>
                <textarea id="observation" name="observation"></textarea>
            </div>
            <button type="submit" class="submit-btn">Envoyer</button>
        </form>
    </div>
    <a href="dashboard.html" class="btn">üìä Voir le Dashboard</a>
</body>
</html>
